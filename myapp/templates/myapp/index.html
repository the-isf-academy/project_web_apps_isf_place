{% extends "myapp/base.html" %}
{% load static %}

{% block content %}
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script src="{% static 'js/colorpicker.js' %}"></script>
<link rel="stylesheet" type="text/css" href="{% static 'css/colorpicker.css' %}">

<script>
    window.onload = function() {
        var squares = document.querySelectorAll('.square');
        var colorpickerHolder = document.getElementById('colorpickerHolder');
        squares.forEach(function(square) {
            square.addEventListener('click', function() {
                colorpickerHolder.style.display = 'block';
            });
        });
    };

    $(document).ready(function() {
        var cal = $('#colorpickerHolder');
        var rgb = {
            r: $(cal).data('colorpicker').fields.eq(1).val(),
            g: $(cal).data('colorpicker').fields.eq(2).val(),
            b: $(cal).data('colorpicker').fields.eq(3).val()
        };
        document.getElementById('redValue').textContent = 'Red: ' + rgb.r;
        document.getElementById('greenValue').textContent = 'Green: ' + rgb.g;
        document.getElementById('blueValue').textContent = 'Blue: ' + rgb.b;
    });
</script>

<style>
    .grid {
        display: grid;
        grid-template-columns: repeat(165, 1fr);
    }
    .square {
        width: 10px;
        height: 10px;
        background-color: rgb(241, 10, 10);
        border: 1px solid black;
    }
    #colorpickerHolder {
        display: none;
    }
</style>

<h1>My App</h1>

<p id="redValue"></p>
<p id="greenValue"></p>
<p id="blueValue"></p>

<div id="colorpickerHolder"></div>

<div class="grid">
    {% for row in grid %}
        {% for tile in row %}
            <div class="square" style="background-color: rgb({{ tile.r }}, {{ tile.g }}, {{ tile.b }})"></div>
        {% endfor %}
    {% endfor %}
</div>

<a href="{% url 'myapp:leaderboard' %}">View Leaderboard</a>

{% endblock %}